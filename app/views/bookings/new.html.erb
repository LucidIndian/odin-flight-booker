<h1>New booking</h1>

<%= form_with model: @booking do |f| %>
  <div class="booking-form">
    <p>
      <%="Flight date: #{@selected_flight.start_date}" %>
    </p> 
    <p>
      <%= "Leaving from: #{@selected_flight.departure_airport.code}" %>
    </p>
    <p>
      <%= "Flying to: #{@selected_flight.arrival_airport.code}" %>
    </p>

  <%# set of fields to enter personal information for each passenger %>
    <% i = 1 %>
    <%= f.fields_for :passengers do |passengers_data| %>
          <label class="label">
            <%= "Passenger #{i}" %><br/>
          </label>
          <div>
            <p>
              <%= passengers_data.text_field :name, placeholder: "Passenger's name", required: true%>
            </p>
          </div>
          <div class="field">
            <p>
              <%= passengers_data.email_field :email, placeholder: "name@example.com", required: true%>
            </p>
          </div>
      <% i += 1%>
    <% end %>
    
    <%= f.hidden_field :flight_id, value: params[:flight_id] %>

        <%= f.submit 'Purchase Ticket' %>

  </div>
<% end %>



<%#= render "form", booking: @booking %>

<%# <br> %>

<%# <div>
  <%= link_to "Back to bookings", bookings_path %>
<%# </div> %>
